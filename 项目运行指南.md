# AFAC Agent é¡¹ç›®è¿è¡ŒæŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [ä¾èµ–å®‰è£…](#ä¾èµ–å®‰è£…)
3. [APIå¯†é’¥é…ç½®](#apiå¯†é’¥é…ç½®)
4. [Version_0 åŸºç¡€æ•°æ®é‡‡é›†](#version_0-åŸºç¡€æ•°æ®é‡‡é›†)
5. [Version_1 æ™ºèƒ½å¢å¼ºåŠŸèƒ½](#version_1-æ™ºèƒ½å¢å¼ºåŠŸèƒ½)
6. [å®Œæ•´Pipelineè¿è¡Œ](#å®Œæ•´pipelineè¿è¡Œ)
7. [å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)
8. [é¡¹ç›®ç›®å½•ç»“æ„](#é¡¹ç›®ç›®å½•ç»“æ„)

---

## ç¯å¢ƒå‡†å¤‡

### 1. ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS, Linux
- **Pythonç‰ˆæœ¬**: 3.8 - 3.11 (æ¨è 3.10)
- **å†…å­˜**: è‡³å°‘ 8GB RAM
- **ç¡¬ç›˜ç©ºé—´**: è‡³å°‘ 5GB å¯ç”¨ç©ºé—´

### 2. å®‰è£…Python

**Windows**:
```bash
# ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…
https://www.python.org/downloads/

# æˆ–ä½¿ç”¨wingetå®‰è£…
winget install Python.Python.3.10
```

**macOS**:
```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install python@3.10
```

**Linux**:
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install python3.10 python3.10-pip

# CentOS/RHEL
sudo yum install python3.10
```

### 3. éªŒè¯å®‰è£…

```bash
python --version
# åº”æ˜¾ç¤º: Python 3.10.x

pip --version
# åº”æ˜¾ç¤º: pip 23.x.x from ...
```

---

## ä¾èµ–å®‰è£…

### æ­¥éª¤1: å…‹éš†/ä¸‹è½½é¡¹ç›®

```bash
# æ–¹æ³•1: ä½¿ç”¨gitå…‹éš†
git clone https://github.com/your-repo/AIDM_AFAC_Agent.git
cd AIDM_AFAC_Agent

# æ–¹æ³•2: ç›´æ¥è§£å‹ä¸‹è½½çš„ZIPæ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•
cd D:\VLM\AIDM_AFAC_Agent
```

### æ­¥éª¤2: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate

# macOS/Linux:
source venv/bin/activate

# æˆåŠŸåï¼Œå‘½ä»¤è¡Œå‰ä¼šæ˜¾ç¤º (venv)
```

### æ­¥éª¤3: å®‰è£…åŸºç¡€ä¾èµ–ï¼ˆVersion_0ï¼‰

```bash
# å®‰è£…åŸºç¡€æ•°æ®é‡‡é›†æ‰€éœ€çš„åº“
pip install numpy pandas matplotlib requests beautifulsoup4 akshare lxml openpyxl
```

**ä¾èµ–è¯´æ˜**:
- `numpy`: æ•°å€¼è®¡ç®—
- `pandas`: æ•°æ®å¤„ç†
- `matplotlib`: æ•°æ®å¯è§†åŒ–
- `requests`: HTTPè¯·æ±‚
- `beautifulsoup4`: HTMLè§£æ
- `akshare`: é‡‘èæ•°æ®æ¥å£
- `lxml`: XML/HTMLè§£æå™¨
- `openpyxl`: Excelæ–‡ä»¶å¤„ç†

### æ­¥éª¤4: å®‰è£…å¢å¼ºä¾èµ–ï¼ˆVersion_1ï¼‰

```bash
# å®‰è£…AIå’Œå¢å¼ºåŠŸèƒ½æ‰€éœ€çš„åº“
pip install langchain langchain-openai langchain-community langchain-core \
    openai dashscope chromadb \
    playwright asyncio httpx \
    jieba rank-bm25 scikit-learn \
    pdf4llm arxiv \
    e2b-code-interpreter \
    crawl4ai nest-asyncio \
    chineseize-matplotlib
```

**ä¾èµ–è¯´æ˜**:
- `langchain*`: LLMåº”ç”¨å¼€å‘æ¡†æ¶
- `openai`, `dashscope`: AIæ¨¡å‹æ¥å£
- `playwright`: æµè§ˆå™¨è‡ªåŠ¨åŒ–
- `jieba`, `rank-bm25`: ä¸­æ–‡åˆ†è¯å’Œæ£€ç´¢
- `pdf4llm`, `arxiv`: å­¦æœ¯è®ºæ–‡å¤„ç†
- `e2b-code-interpreter`: ä»£ç æ²™ç®±
- `crawl4ai`: æ™ºèƒ½ç½‘é¡µçˆ¬å–

### æ­¥éª¤5: å®‰è£…Playwrightæµè§ˆå™¨

```bash
# å®‰è£…æµè§ˆå™¨é©±åŠ¨ï¼ˆé¦–æ¬¡ä½¿ç”¨å¿…é¡»æ‰§è¡Œï¼‰
playwright install chromium

# å¦‚æœéœ€è¦å®Œæ•´æµè§ˆå™¨æ”¯æŒ
playwright install
```

### æ­¥éª¤6: éªŒè¯å®‰è£…

```bash
# æµ‹è¯•åŸºç¡€å¯¼å…¥
python -c "import pandas, numpy, akshare, requests; print('åŸºç¡€ä¾èµ–å®‰è£…æˆåŠŸï¼')"

# æµ‹è¯•AIä¾èµ–ï¼ˆVersion_1ï¼‰
python -c "import langchain, openai; print('AIä¾èµ–å®‰è£…æˆåŠŸï¼')"
```

---

## APIå¯†é’¥é…ç½®

### Version_0 é…ç½®

Version_0 **ä¸éœ€è¦**APIå¯†é’¥ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚

### Version_1 é…ç½®

**é‡è¦**: Version_1 éœ€è¦é…ç½®ä»¥ä¸‹APIå¯†é’¥æ‰èƒ½ä½¿ç”¨å¢å¼ºåŠŸèƒ½ã€‚

#### æ­¥éª¤1: è·å–APIå¯†é’¥

1. **é˜¿é‡Œäº‘APIå¯†é’¥** (å¿…éœ€)
   - è®¿é—®: https://dashscope.console.aliyun.com/
   - æ³¨å†Œ/ç™»å½•é˜¿é‡Œäº‘è´¦å·
   - å¼€é€šçµç§¯æ¨¡å‹æœåŠ¡
   - è·å–API Key (æ ¼å¼: `sk-xxxxxxxxxx`)

2. **ç™¾åº¦åƒå¸†API** (å¿…éœ€ç”¨äºæœç´¢)
   - è®¿é—®: https://cloud.baidu.com/product/wenxinworkshop
   - å¼€é€šåƒå¸†å¤§æ¨¡å‹å¹³å°
   - è·å–Access Key (æ ¼å¼: `bce-v3/ALTAK-xxxx/xxxx`)

3. **E2B APIå¯†é’¥** (å¿…éœ€ç”¨äºä»£ç æ‰§è¡Œ)
   - è®¿é—®: https://e2b.dev/
   - æ³¨å†Œè´¦å·
   - è·å–API Key (æ ¼å¼: `e2b_xxxx`)

#### æ­¥éª¤2: é…ç½®å¯†é’¥

ç¼–è¾‘ `v1_version/constants.py` æ–‡ä»¶:

```python
# æ‰¾åˆ°ä»¥ä¸‹è¡Œï¼Œæ›¿æ¢ä¸ºä½ çš„çœŸå®å¯†é’¥

# E2Bæ²™ç®±APIå¯†é’¥
E2B_API_KEY = 'e2b_ä½ çš„å¯†é’¥'  # æ›¿æ¢è¿™é‡Œ

# é˜¿é‡Œäº‘APIå¯†é’¥
ALI_API_KEY = 'sk-ä½ çš„å¯†é’¥'  # æ›¿æ¢è¿™é‡Œ

# ç™¾åº¦åƒå¸†APIå¯†é’¥
BAIDU_KEY = 'bce-v3/ALTAK-ä½ çš„å¯†é’¥/xxx'  # æ›¿æ¢è¿™é‡Œ
```

**ä¿å­˜æ–‡ä»¶åé…ç½®ç”Ÿæ•ˆã€‚**

#### æ­¥éª¤3: éªŒè¯é…ç½®

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test_config.py`:

```python
import sys
sys.path.append('./v1_version')

from constants import ALI_API_KEY, E2B_API_KEY, BAIDU_KEY

# æ£€æŸ¥é…ç½®
print("=== APIå¯†é’¥é…ç½®æ£€æŸ¥ ===")
print(f"é˜¿é‡Œäº‘API: {ALI_API_KEY[:10]}... ({'å·²é…ç½®' if ALI_API_KEY != 'sk-xxxx' else 'æœªé…ç½®'})")
print(f"E2B API: {E2B_API_KEY[:10]}... ({'å·²é…ç½®' if E2B_API_KEY != 'e2b_xxxx' else 'æœªé…ç½®'})")
print(f"ç™¾åº¦API: {BAIDU_KEY[:15]}... ({'å·²é…ç½®' if BAIDU_KEY != 'bce-v3/ALTAK-xxxx/xxxx' else 'æœªé…ç½®'})")

# æµ‹è¯•é˜¿é‡Œäº‘è¿æ¥
try:
    from constants import qwen_flash
    response = qwen_flash.invoke("ä½ å¥½")
    print("\nâœ… é˜¿é‡Œäº‘APIè¿æ¥æˆåŠŸï¼")
    print(f"æµ‹è¯•å“åº”: {response.content[:50]}...")
except Exception as e:
    print(f"\nâŒ é˜¿é‡Œäº‘APIè¿æ¥å¤±è´¥: {e}")

# æµ‹è¯•E2Bè¿æ¥
try:
    from e2b_code_interpreter import Sandbox
    with Sandbox(api_key=E2B_API_KEY) as sandbox:
        result = sandbox.run_code("print('Hello E2B!')")
        print("âœ… E2B APIè¿æ¥æˆåŠŸï¼")
except Exception as e:
    print(f"âŒ E2B APIè¿æ¥å¤±è´¥: {e}")
```

è¿è¡Œæµ‹è¯•:
```bash
python test_config.py
```

---

## Version_0 åŸºç¡€æ•°æ®é‡‡é›†

### ä½¿ç”¨åœºæ™¯

é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š
- åªéœ€è¦åŸºç¡€æ•°æ®é‡‡é›†ï¼Œä¸éœ€è¦AIåˆ†æ
- ä¸æƒ³é…ç½®APIå¯†é’¥
- æƒ³å¿«é€ŸéªŒè¯æ•°æ®é‡‡é›†åŠŸèƒ½

### å¿«é€Ÿå¼€å§‹

#### 1. è·å–å…¬å¸åŸºæœ¬ä¿¡æ¯

åˆ›å»ºè„šæœ¬ `example_v0_company_info.py`:

```python
from get_company_intro import get_company_profile_ths_cn, get_company_profile_ths_hk

# ç¤ºä¾‹1: è·å–Aè‚¡å…¬å¸ä¿¡æ¯ (é•¿æ±Ÿç”µåŠ›)
print("=== è·å–é•¿æ±Ÿç”µåŠ›(600900)ä¿¡æ¯ ===")
company_info_cn = get_company_profile_ths_cn("600900")
print(f"å…¬å¸åç§°: {company_info_cn['å…¬å¸åç§°']}")
print(f"æ‰€å±è¡Œä¸š: {company_info_cn['æ‰€å±è¡Œä¸š']}")
print(f"ä¸»è¥ä¸šåŠ¡: {company_info_cn['ä¸»è¥ä¸šåŠ¡'][:100]}...")
print()

# ç¤ºä¾‹2: è·å–æ¸¯è‚¡å…¬å¸ä¿¡æ¯ (è…¾è®¯æ§è‚¡)
print("=== è·å–è…¾è®¯æ§è‚¡(0700)ä¿¡æ¯ ===")
company_info_hk = get_company_profile_ths_hk("0700")
print(f"å…¬å¸åç§°: {company_info_hk['å…¬å¸åç§°']}")
print(f"æ‰€å±è¡Œä¸š: {company_info_hk['æ‰€å±è¡Œä¸š']}")
print(f"ä¸»è¥ä¸šåŠ¡: {company_info_hk['ä¸»è¥ä¸šåŠ¡'][:100]}...")
```

è¿è¡Œ:
```bash
python example_v0_company_info.py
```

**æ³¨æ„**: é¦–æ¬¡è¿è¡Œä¼šä»ç½‘ç»œçˆ¬å–æ•°æ®ï¼Œéœ€ç­‰å¾…20-30ç§’ã€‚

#### 2. ä¸‹è½½è´¢åŠ¡æ•°æ®

åˆ›å»ºè„šæœ¬ `example_v0_financial.py`:

```python
from get_financial_data_annual import download_cn_financial_data, download_hk_financial_data
import pandas as pd
import time

# ç¤ºä¾‹1: ä¸‹è½½Aè‚¡è´¢åŠ¡æ•°æ® (é•¿æ±Ÿç”µåŠ›)
print("=== ä¸‹è½½é•¿æ±Ÿç”µåŠ›è´¢åŠ¡æ•°æ® ===")

# ä¸‹è½½ä¸»è¦æŒ‡æ ‡
print("ä¸‹è½½ä¸»è¦æŒ‡æ ‡...")
filename_main = download_cn_financial_data("600900", type="main")
if filename_main:
    df_main = pd.read_excel(filename_main)
    print(f"ä¸»è¦æŒ‡æ ‡ä¿å­˜è‡³: {filename_main}")
    print(f"æ•°æ®è¡Œæ•°: {len(df_main)}")
    print(df_main.head())

time.sleep(20)  # é¿å…åçˆ¬è™«ï¼Œç­‰å¾…20ç§’

# ä¸‹è½½åˆ©æ¶¦è¡¨
print("\nä¸‹è½½åˆ©æ¶¦è¡¨...")
filename_benefit = download_cn_financial_data("600900", type="benift")
if filename_benefit:
    print(f"åˆ©æ¶¦è¡¨ä¿å­˜è‡³: {filename_benefit}")

# ç¤ºä¾‹2: ä¸‹è½½æ¸¯è‚¡è´¢åŠ¡æ•°æ® (è…¾è®¯æ§è‚¡)
print("\n=== ä¸‹è½½è…¾è®¯æ§è‚¡è´¢åŠ¡æ•°æ® ===")
time.sleep(20)
filename_hk = download_hk_financial_data("0700", type="main")
if filename_hk:
    print(f"è´¢åŠ¡æ•°æ®ä¿å­˜è‡³: {filename_hk}")
```

è¿è¡Œ:
```bash
python example_v0_financial.py
```

**é¢„è®¡è€—æ—¶**: çº¦60ç§’ï¼ˆåŒ…å«é˜²çˆ¬è™«å»¶æ—¶ï¼‰

#### 3. è·å–è‚¡ç¥¨è¡Œæƒ…

åˆ›å»ºè„šæœ¬ `example_v0_stock.py`:

```python
from get_stock_info import get_cn_stock_info, get_hk_stock_info
import matplotlib.pyplot as plt
from matplotlib import rcParams

# è®¾ç½®ä¸­æ–‡å­—ä½“
rcParams['font.sans-serif'] = ['SimHei']  # é»‘ä½“
rcParams['axes.unicode_minus'] = False

# è·å–é•¿æ±Ÿç”µåŠ›è¿‘åŠå¹´è¡Œæƒ…
print("=== è·å–é•¿æ±Ÿç”µåŠ›è¿‘åŠå¹´è¡Œæƒ… ===")
stock_data = get_cn_stock_info(
    symbol="600900",
    period="daily",
    start_date="20240601",
    end_date="20241231"
)

print(f"æ•°æ®æ¡æ•°: {len(stock_data)}")
print(stock_data.head())

# ç»˜åˆ¶æ”¶ç›˜ä»·èµ°åŠ¿å›¾
plt.figure(figsize=(12, 6))
plt.plot(stock_data['æ—¥æœŸ'], stock_data['æ”¶ç›˜'], marker='o', linewidth=2)
plt.title('é•¿æ±Ÿç”µåŠ›(600900)æ”¶ç›˜ä»·èµ°åŠ¿', fontsize=16)
plt.xlabel('æ—¥æœŸ', fontsize=12)
plt.ylabel('æ”¶ç›˜ä»·(å…ƒ)', fontsize=12)
plt.xticks(rotation=45)
plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.savefig('é•¿æ±Ÿç”µåŠ›_è‚¡ä»·èµ°åŠ¿.png', dpi=150)
print("\nå›¾è¡¨å·²ä¿å­˜è‡³: é•¿æ±Ÿç”µåŠ›_è‚¡ä»·èµ°åŠ¿.png")
plt.show()
```

è¿è¡Œ:
```bash
python example_v0_stock.py
```

#### 4. è·å–æœºæ„è¯„çº§

åˆ›å»ºè„šæœ¬ `example_v0_rating.py`:

```python
from get_rating_info import get_cn_rating_info, get_hk_rating_info

# ç¤ºä¾‹1: è·å–Aè‚¡è¯„çº§ (é•¿æ±Ÿç”µåŠ›)
print("=== é•¿æ±Ÿç”µåŠ›æœºæ„è¯„çº§ ===")
rating_cn = get_cn_rating_info("600900")
print(f"è¯„çº§æ¡æ•°: {len(rating_cn)}")
print(rating_cn.head(10))  # æ˜¾ç¤ºå‰10æ¡
print()

# ç¤ºä¾‹2: è·å–æ¸¯è‚¡è¯„çº§ (è…¾è®¯æ§è‚¡)
print("=== è…¾è®¯æ§è‚¡æœºæ„è¯„çº§ ===")
rating_hk = get_hk_rating_info("0700")
print(f"è¯„çº§æ¡æ•°: {len(rating_hk)}")
print(rating_hk.head(10))
```

è¿è¡Œ:
```bash
python example_v0_rating.py
```

#### 5. ç»¼åˆæ•°æ®é‡‡é›†ç¤ºä¾‹

åˆ›å»ºè„šæœ¬ `example_v0_complete.py`:

```python
import time
import pandas as pd
from get_company_intro import get_company_profile_ths_cn
from get_financial_data_annual import download_cn_financial_data
from get_stock_info import get_cn_stock_info
from get_rating_info import get_cn_rating_info

def analyze_company(symbol, company_name):
    """å®Œæ•´åˆ†æä¸€å®¶å…¬å¸"""
    print(f"\n{'='*60}")
    print(f"å¼€å§‹åˆ†æ: {company_name} ({symbol})")
    print(f"{'='*60}\n")

    # 1. åŸºæœ¬ä¿¡æ¯
    print("ã€1/4ã€‘è·å–å…¬å¸åŸºæœ¬ä¿¡æ¯...")
    try:
        company_info = get_company_profile_ths_cn(symbol)
        print(f"âœ“ å…¬å¸åç§°: {company_info['å…¬å¸åç§°']}")
        print(f"âœ“ æ‰€å±è¡Œä¸š: {company_info['æ‰€å±è¡Œä¸š']}")
    except Exception as e:
        print(f"âœ— å¤±è´¥: {e}")

    time.sleep(20)

    # 2. è´¢åŠ¡æ•°æ®
    print("\nã€2/4ã€‘ä¸‹è½½è´¢åŠ¡æ•°æ®...")
    try:
        filename = download_cn_financial_data(symbol, type="main")
        if filename:
            df = pd.read_excel(filename)
            print(f"âœ“ è´¢åŠ¡æ•°æ®å·²ä¿å­˜: {filename}")
            print(f"âœ“ æ•°æ®æœŸæ•°: {len(df.columns)-1}æœŸ")
    except Exception as e:
        print(f"âœ— å¤±è´¥: {e}")

    time.sleep(20)

    # 3. è‚¡ç¥¨è¡Œæƒ…
    print("\nã€3/4ã€‘è·å–è‚¡ç¥¨è¡Œæƒ…...")
    try:
        stock_data = get_cn_stock_info(
            symbol=symbol,
            period="daily",
            start_date="20240601",
            end_date="20241231"
        )
        print(f"âœ“ è¡Œæƒ…æ•°æ®: {len(stock_data)}ä¸ªäº¤æ˜“æ—¥")
        print(f"âœ“ æœ€æ–°æ”¶ç›˜ä»·: {stock_data.iloc[-1]['æ”¶ç›˜']:.2f}å…ƒ")
    except Exception as e:
        print(f"âœ— å¤±è´¥: {e}")

    time.sleep(20)

    # 4. æœºæ„è¯„çº§
    print("\nã€4/4ã€‘è·å–æœºæ„è¯„çº§...")
    try:
        rating = get_cn_rating_info(symbol)
        print(f"âœ“ è¯„çº§è®°å½•: {len(rating)}æ¡")
        if len(rating) > 0:
            print(f"âœ“ æœ€æ–°è¯„çº§: {rating.iloc[0]['è¯„çº§']}")
    except Exception as e:
        print(f"âœ— å¤±è´¥: {e}")

    print(f"\n{'='*60}")
    print(f"åˆ†æå®Œæˆ: {company_name}")
    print(f"{'='*60}\n")

# åˆ†æç¤ºä¾‹
if __name__ == "__main__":
    analyze_company("600900", "é•¿æ±Ÿç”µåŠ›")
    # analyze_company("000001", "å¹³å®‰é“¶è¡Œ")
    # analyze_company("600519", "è´µå·èŒ…å°")
```

è¿è¡Œ:
```bash
python example_v0_complete.py
```

**é¢„è®¡æ€»è€—æ—¶**: çº¦90ç§’

---

## Version_1 æ™ºèƒ½å¢å¼ºåŠŸèƒ½

### å‰ç½®è¦æ±‚

1. âœ… å·²å®Œæˆ [APIå¯†é’¥é…ç½®](#apiå¯†é’¥é…ç½®)
2. âœ… å·²å®‰è£…å¢å¼ºä¾èµ–
3. âœ… å·²éªŒè¯APIè¿æ¥

### ä½¿ç”¨åœºæ™¯

é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š
- éœ€è¦è·å–å®æ—¶ä¿¡æ¯ï¼ˆé€šè¿‡æœç´¢å¼•æ“ï¼‰
- éœ€è¦è‡ªåŠ¨åŒ–æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- éœ€è¦å¤šæ­¥æ¨ç†å›ç­”å¤æ‚é—®é¢˜
- éœ€è¦ç”Ÿæˆå›¾è¡¨å¹¶è¿›è¡Œè´¨é‡æ£€æŸ¥

---

### åŠŸèƒ½1: å®æ—¶æœç´¢é—®ç­”

#### ç¤ºä¾‹1: ç®€å•é—®ç­”ï¼ˆç™¾åº¦æœç´¢ï¼‰

åˆ›å»ºè„šæœ¬ `example_v1_search.py`:

```python
import sys
sys.path.append('./v1_version')

from financial_data_search import simple_qa_en_baidu
import asyncio

async def main():
    # é—®é¢˜1: å®æ—¶å¸‚åœºä¿¡æ¯
    question1 = "2024å¹´ç¾å›¢å’Œé¥¿äº†ä¹ˆçš„å¸‚åœºä»½é¢å¯¹æ¯”"
    print(f"é—®é¢˜: {question1}")
    print("æœç´¢ä¸­ï¼Œè¯·ç¨å€™...\n")

    answer1 = await simple_qa_en_baidu(question1, max_search_num=5)
    print("="*60)
    print("å›ç­”:")
    print(answer1)
    print("="*60)

    # é—®é¢˜2: å…¬å¸åŠ¨æ€
    question2 = "æ¯”äºšè¿ª2024å¹´æ–°èƒ½æºæ±½è½¦é”€é‡"
    print(f"\né—®é¢˜: {question2}")
    print("æœç´¢ä¸­ï¼Œè¯·ç¨å€™...\n")

    answer2 = await simple_qa_en_baidu(question2, max_search_num=5)
    print("="*60)
    print("å›ç­”:")
    print(answer2)
    print("="*60)

if __name__ == "__main__":
    asyncio.run(main())
```

è¿è¡Œ:
```bash
python example_v1_search.py
```

**é¢„è®¡è€—æ—¶**: æ¯ä¸ªé—®é¢˜15-30ç§’

#### ç¤ºä¾‹2: å­¦æœ¯æœç´¢ï¼ˆarXivï¼‰

åˆ›å»ºè„šæœ¬ `example_v1_arxiv.py`:

```python
import sys
sys.path.append('./v1_version')

from financial_data_search import simple_qa_en_arxiv

# å­¦æœ¯é—®é¢˜
question = "What is the latest research on Large Language Model agents?"
print(f"é—®é¢˜: {question}")
print("æœç´¢arXivä¸­ï¼Œè¯·ç¨å€™...\n")

answer = simple_qa_en_arxiv(question, max_search_num=5)
print("="*60)
print("å›ç­”:")
print(answer)
print("="*60)
```

è¿è¡Œ:
```bash
python example_v1_arxiv.py
```

**é¢„è®¡è€—æ—¶**: 30-60ç§’ï¼ˆåŒ…å«è®ºæ–‡ä¸‹è½½å’Œè§£æï¼‰

---

### åŠŸèƒ½2: å¤šæ­¥æ¨ç†é—®ç­”

#### ç¤ºä¾‹: å¤æ‚é‡‘èé—®é¢˜

åˆ›å»ºè„šæœ¬ `example_v1_multi_step.py`:

```python
import sys
sys.path.append('./v1_version')

from financial_data_search import financial_search
import asyncio

async def main():
    # å¤æ‚é—®é¢˜ï¼ˆä¼šè‡ªåŠ¨æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼‰
    question = """
    è¯·åˆ†ææ¯”äºšè¿ªåœ¨2024å¹´çš„è¡¨ç°ï¼š
    1. é”€é‡å’Œå¸‚åœºä»½é¢å¦‚ä½•ï¼Ÿ
    2. æ ¸å¿ƒæŠ€æœ¯ä¼˜åŠ¿æœ‰å“ªäº›ï¼Ÿ
    3. é¢ä¸´çš„ä¸»è¦ç«äº‰å¯¹æ‰‹å’ŒæŒ‘æˆ˜ï¼Ÿ
    4. è´¢åŠ¡çŠ¶å†µå¦‚ä½•ï¼Ÿ
    """

    print("å¤æ‚é—®é¢˜åˆ†æå¼€å§‹...")
    print("ç³»ç»Ÿä¼šè‡ªåŠ¨æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼ˆé¢„è®¡2-3åˆ†é’Ÿï¼‰\n")

    answer = await financial_search(question)

    print("\n" + "="*60)
    print("æœ€ç»ˆæŠ¥å‘Š:")
    print("="*60)
    print(answer)

if __name__ == "__main__":
    asyncio.run(main())
```

è¿è¡Œ:
```bash
python example_v1_multi_step.py
```

**é¢„è®¡è€—æ—¶**: 2-3åˆ†é’Ÿ

**æ‰§è¡Œæµç¨‹**:
```
1. ä»»åŠ¡æ”¹å†™ (5ç§’)
   â†“
2. å­ä»»åŠ¡æ‹†åˆ† (5ç§’)
   â†“
3. å­ä»»åŠ¡1: æœç´¢é”€é‡æ•°æ® (30ç§’)
   â†“
4. å­ä»»åŠ¡2: æœç´¢æŠ€æœ¯ä¼˜åŠ¿ (30ç§’)
   â†“
5. å­ä»»åŠ¡3: æœç´¢ç«äº‰åˆ†æ (30ç§’)
   â†“
6. å­ä»»åŠ¡4: æœç´¢è´¢åŠ¡æ•°æ® (30ç§’)
   â†“
7. æ±‡æ€»æ•´åˆ (10ç§’)
```

---

### åŠŸèƒ½3: è‡ªåŠ¨åŒ–æ•°æ®åˆ†æ

#### ç¤ºä¾‹1: æ•°æ®åˆ†æï¼ˆçº¯è®¡ç®—ï¼‰

åˆ›å»ºè„šæœ¬ `example_v1_analysis.py`:

```python
import sys
sys.path.append('./v1_version')

from python_data_analyse import run_data_analysis

# å®šä¹‰åˆ†æä»»åŠ¡
task = """
è¯·åˆ†æä»¥ä¸‹æ¯”äºšè¿ª2024å¹´å„å­£åº¦é”€é‡æ•°æ®ï¼š

æ•°æ® = {
    'Q1': 300000,
    'Q2': 350000,
    'Q3': 400000,
    'Q4': 450000
}

è¦æ±‚ï¼š
1. è®¡ç®—æ€»é”€é‡
2. è®¡ç®—å¹³å‡æ¯å­£åº¦é”€é‡
3. è®¡ç®—ç¯æ¯”å¢é•¿ç‡
4. æ‰¾å‡ºé”€é‡æœ€é«˜çš„å­£åº¦
5. å°†ç»“æœä¿å­˜åˆ° analysis_result.txt

æ³¨æ„ï¼šä¸è¦ç”Ÿæˆå›¾è¡¨ï¼Œåªè¾“å‡ºè®¡ç®—ç»“æœã€‚
"""

print("å¼€å§‹æ•°æ®åˆ†æ...")
print("æ­£åœ¨ç”Ÿæˆåˆ†æä»£ç å¹¶æ‰§è¡Œï¼ˆE2Bæ²™ç®±ï¼‰...\n")

# æ‰§è¡Œåˆ†æ
run_data_analysis(
    task=task,
    local_save_path="./analysis_result.txt",
    remote_save_path="/home/user/analysis_result.txt"
)

print("\nåˆ†æå®Œæˆï¼")
print("ç»“æœå·²ä¿å­˜è‡³: analysis_result.txt")

# è¯»å–å¹¶æ˜¾ç¤ºç»“æœ
with open("./analysis_result.txt", "r", encoding="utf-8") as f:
    result = f.read()
    print("\nåˆ†æç»“æœ:")
    print("="*60)
    print(result)
```

è¿è¡Œ:
```bash
python example_v1_analysis.py
```

#### ç¤ºä¾‹2: ç”Ÿæˆå›¾è¡¨

åˆ›å»ºè„šæœ¬ `example_v1_chart.py`:

```python
import sys
sys.path.append('./v1_version')

from python_data_analyse import Sandbox, chat_with_llm, picture_gen_prompt_template, match_code_blocks
from constants import E2B_API_KEY

# å®šä¹‰å›¾è¡¨ç”Ÿæˆä»»åŠ¡
task = """
è¯·ç”¨ä»¥ä¸‹æ•°æ®ç»˜åˆ¶æŸ±çŠ¶å›¾ï¼š

æ¯”äºšè¿ª2024å¹´å„å­£åº¦é”€é‡ï¼ˆå•ä½ï¼šä¸‡è¾†ï¼‰:
- Q1: 30.0
- Q2: 35.0
- Q3: 40.0
- Q4: 45.0

è¦æ±‚ï¼š
1. ä½¿ç”¨matplotlibç»˜åˆ¶æŸ±çŠ¶å›¾
2. å›¾è¡¨æ ‡é¢˜ï¼š"æ¯”äºšè¿ª2024å¹´å­£åº¦é”€é‡"
3. Xè½´æ ‡ç­¾ï¼š"å­£åº¦"
4. Yè½´æ ‡ç­¾ï¼š"é”€é‡ï¼ˆä¸‡è¾†ï¼‰"
5. æ¯ä¸ªæŸ±å­ä¸Šæ ‡æ³¨å…·ä½“æ•°å€¼
6. ä¿å­˜ä¸º byd_sales_chart.png
"""

print("å¼€å§‹ç”Ÿæˆå›¾è¡¨...")
print("æ­£åœ¨ç”Ÿæˆç»˜å›¾ä»£ç å¹¶æ‰§è¡Œï¼ˆE2Bæ²™ç®±ï¼‰...\n")

# æ‰§è¡Œç»˜å›¾
with Sandbox.create(api_key=E2B_API_KEY) as sandbox:
    prompt = picture_gen_prompt_template.format(task=task)
    result, code = chat_with_llm(sandbox, prompt, max_retries=2)

    if result and result[0] == 0:
        # ä¸‹è½½å›¾ç‰‡
        from python_data_analyse import download_file
        download_file(sandbox, "/home/user/byd_sales_chart.png", "./byd_sales_chart.png")
        print("\nâœ… å›¾è¡¨ç”ŸæˆæˆåŠŸï¼")
        print("å›¾è¡¨å·²ä¿å­˜è‡³: byd_sales_chart.png")
    else:
        print("\nâŒ å›¾è¡¨ç”Ÿæˆå¤±è´¥")
```

è¿è¡Œ:
```bash
python example_v1_chart.py
```

---

### åŠŸèƒ½4: å›¾è¡¨è´¨é‡æ£€æŸ¥ï¼ˆVLMï¼‰

åˆ›å»ºè„šæœ¬ `example_v1_vlm_check.py`:

```python
import sys
sys.path.append('./v1_version')

from python_data_analyse import vlm_check_function

# æ£€æŸ¥ä¸Šä¸€æ­¥ç”Ÿæˆçš„å›¾è¡¨
task = "ç”Ÿæˆæ¯”äºšè¿ª2024å¹´å­£åº¦é”€é‡æŸ±çŠ¶å›¾"
image_path = "./byd_sales_chart.png"

print("å¼€å§‹VLMè´¨é‡æ£€æŸ¥...")
print(f"æ£€æŸ¥å›¾è¡¨: {image_path}\n")

feedback = vlm_check_function(image_path, task)

print("="*60)
print("VLMè´¨é‡æ£€æŸ¥ç»“æœ:")
print("="*60)
print(feedback)
```

è¿è¡Œ:
```bash
python example_v1_vlm_check.py
```

**æ£€æŸ¥ç»´åº¦**:
- âœ“ æ¸…æ™°åº¦å’Œé”åº¦
- âœ“ å­—ä½“å¤§å°
- âœ“ æ ‡ç­¾å‡†ç¡®æ€§
- âœ“ å›¾è¡¨ç±»å‹é€‚é…
- âœ“ é¢œè‰²ä½¿ç”¨
- âœ“ å¸ƒå±€ç¾è§‚æ€§

---

### åŠŸèƒ½5: ä¸œæ–¹è´¢å¯Œç ”æŠ¥é‡‡é›†

åˆ›å»ºè„šæœ¬ `example_v1_dfcf.py`:

```python
import sys
sys.path.append('./v1_version')

from get_dfcf_research_info import (
    get_dfcf_industry_research_report_list,
    get_dfcf_industry_resport_content,
    industry_dict
)

# æŸ¥çœ‹å¯ç”¨çš„è¡Œä¸šä»£ç 
print("=== å¯ç”¨è¡Œä¸šä»£ç  ===")
for code, name in list(industry_dict.items())[:10]:
    print(f"{code}: {name}")
print("...")

# ç¤ºä¾‹ï¼šè·å–"æ–°èƒ½æºæ±½è½¦"ç›¸å…³è¡Œä¸šç ”æŠ¥
# è¿™é‡Œä½¿ç”¨"æ±½è½¦æ•´è½¦"è¡Œä¸šä»£ç : 1029
industry_code = "1029"
print(f"\nè·å–è¡Œä¸šä»£ç  {industry_code} ({industry_dict[industry_code]}) çš„ç ”æŠ¥...")

# ç¬¬1æ­¥ï¼šè·å–ç ”æŠ¥åˆ—è¡¨ï¼ˆæœ€è¿‘2å¹´ï¼Œç¬¬1é¡µï¼‰
print("\nã€1/2ã€‘è·å–ç ”æŠ¥åˆ—è¡¨...")
research_df, list_path = get_dfcf_industry_research_report_list(
    industry_code=industry_code,
    max_page=1,  # åªè·å–ç¬¬1é¡µï¼ˆ50æ¡ï¼‰
    years_ago=2,  # æœ€è¿‘2å¹´
    save_path=f"./dfcf_research_list_{industry_code}.csv"
)

print(f"âœ“ è·å–åˆ° {len(research_df)} æ¡ç ”æŠ¥")
print(f"âœ“ åˆ—è¡¨å·²ä¿å­˜: {list_path}")
print("\nå‰5æ¡ç ”æŠ¥:")
print(research_df[['title', 'report_date', 'org_name']].head())

# ç¬¬2æ­¥ï¼šè·å–ç ”æŠ¥å†…å®¹ï¼ˆåªè·å–å‰3æ¡ï¼Œé¿å…è€—æ—¶è¿‡é•¿ï¼‰
print("\nã€2/2ã€‘è·å–ç ”æŠ¥å†…å®¹ï¼ˆå‰3æ¡ï¼‰...")
research_df_small = research_df.head(3)

content_df, content_path = get_dfcf_industry_resport_content(
    research_df_small,
    industry_code=industry_code,
    save_path=f"./dfcf_research_content_{industry_code}.csv"
)

print(f"âœ“ å†…å®¹å·²ä¿å­˜: {content_path}")
print("\nç¬¬1æ¡ç ”æŠ¥å†…å®¹æ‘˜è¦:")
print(content_df.iloc[0]['content'][:200] + "...")
```

è¿è¡Œ:
```bash
python example_v1_dfcf.py
```

**æ³¨æ„**:
- æ¯æ¡ç ”æŠ¥è·å–éœ€ç­‰å¾…20ç§’ï¼ˆé˜²åçˆ¬è™«ï¼‰
- è·å–3æ¡ç ”æŠ¥çº¦éœ€60ç§’
- å¯é€šè¿‡ä¿®æ”¹`max_page`å’Œ`head(n)`è°ƒæ•´æ•°é‡

---

## å®Œæ•´Pipelineè¿è¡Œ

### Jupyter Notebookæ–¹å¼ï¼ˆæ¨èï¼‰

é¡¹ç›®æä¾›äº†3ä¸ªå®Œæ•´çš„åˆ†æPipelineï¼Œä½¿ç”¨Jupyter Notebookæ ¼å¼ã€‚

#### æ­¥éª¤1: å®‰è£…Jupyter

```bash
pip install jupyter notebook
```

#### æ­¥éª¤2: å¯åŠ¨Jupyter

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨
jupyter notebook

# æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ http://localhost:8888
```

#### æ­¥éª¤3: è¿è¡ŒPipeline

åœ¨Jupyterç•Œé¢ä¸­æ‰“å¼€ä»¥ä¸‹Notebookï¼š

**1. å…¬å¸ä¸ªè‚¡åˆ†æ**
```
part1_company_full_pipeline_release.ipynb
```

**æ‰§è¡Œå†…å®¹**:
- è·å–å…¬å¸åŸºæœ¬ä¿¡æ¯
- ä¸‹è½½è´¢åŠ¡æŠ¥è¡¨ï¼ˆèµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨ï¼‰
- è·å–è‚¡ä»·èµ°åŠ¿
- è·å–æœºæ„è¯„çº§
- åŒè¡Œä¸šå¯¹æ¯”åˆ†æ
- ä¼°å€¼é¢„æµ‹
- ç”ŸæˆPDFç ”æŠ¥

**è¿è¡Œæ–¹å¼**: ç‚¹å‡» `Cell` â†’ `Run All`

**é¢„è®¡è€—æ—¶**: 5-10åˆ†é’Ÿ

---

**2. è¡Œä¸šåˆ†æ**
```
part2_industry_full_pipeline_release.ipynb
```

**æ‰§è¡Œå†…å®¹**:
- è¡Œä¸šæ¦‚å†µ
- è¡Œä¸šå†…ä¸»è¦å…¬å¸å¯¹æ¯”
- è¡Œä¸šè´¢åŠ¡æŒ‡æ ‡åˆ†æ
- è¡Œä¸šç ”æŠ¥æ±‡æ€»
- è¡Œä¸šå‘å±•è¶‹åŠ¿
- ç”ŸæˆPDFç ”æŠ¥

**è¿è¡Œæ–¹å¼**: ç‚¹å‡» `Cell` â†’ `Run All`

**é¢„è®¡è€—æ—¶**: 10-15åˆ†é’Ÿ

---

**3. å®è§‚ç»æµåˆ†æ**
```
part3_macro_full_pipeline_release.ipynb
```

**æ‰§è¡Œå†…å®¹**:
- å®è§‚ç»æµæŒ‡æ ‡
- æ”¿ç­–åˆ†æ
- å¸‚åœºç¯å¢ƒ
- å®è§‚ç ”æŠ¥æ±‡æ€»
- ç»æµèµ°åŠ¿åˆ¤æ–­
- ç”ŸæˆPDFç ”æŠ¥

**è¿è¡Œæ–¹å¼**: ç‚¹å‡» `Cell` â†’ `Run All`

**é¢„è®¡è€—æ—¶**: 10-15åˆ†é’Ÿ

---

### Pythonè„šæœ¬æ–¹å¼

å¦‚æœä¸æƒ³ä½¿ç”¨Jupyterï¼Œå¯ä»¥å°†Notebookè½¬æ¢ä¸ºPythonè„šæœ¬è¿è¡Œï¼š

```bash
# è½¬æ¢Notebookä¸ºPythonè„šæœ¬
jupyter nbconvert --to script part1_company_full_pipeline_release.ipynb

# è¿è¡Œè„šæœ¬
python part1_company_full_pipeline_release.py
```

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. å®‰è£…é—®é¢˜

#### Q: `pip install` é€Ÿåº¦å¾ˆæ…¢æˆ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨å›½å†…é•œåƒæº

```bash
# ä¸´æ—¶ä½¿ç”¨æ¸…åé•œåƒ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple åŒ…å

# æ°¸ä¹…é…ç½®ï¼ˆæ¨èï¼‰
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

#### Q: `playwright install` å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ–¹æ³•1: ä½¿ç”¨å›½å†…é•œåƒ
set PLAYWRIGHT_DOWNLOAD_HOST=https://npmmirror.com/mirrors/playwright/

# ç„¶åé‡æ–°å®‰è£…
playwright install chromium

# æ–¹æ³•2: æ‰‹åŠ¨ä¸‹è½½
# è®¿é—® https://playwright.dev/docs/browsers ä¸‹è½½æµè§ˆå™¨
```

---

### 2. è¿è¡Œé”™è¯¯

#### Q: `ModuleNotFoundError: No module named 'xxx'`

**åŸå› **: ä¾èµ–æœªå®‰è£…

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…ç¼ºå¤±çš„ä¾èµ–
pip install xxx

# æˆ–é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

#### Q: `ImportError: cannot import name 'xxx' from 'langchain'`

**åŸå› **: langchainç‰ˆæœ¬ä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ›´æ–°langchainåˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade langchain langchain-openai langchain-community
```

#### Q: çˆ¬è™«è¿”å›ç©ºæ•°æ®æˆ–403é”™è¯¯

**åŸå› **: åçˆ¬è™«æœºåˆ¶è§¦å‘

**è§£å†³æ–¹æ¡ˆ**:
1. å¢åŠ å»¶æ—¶ï¼ˆä¿®æ”¹`sleep(20)`ä¸º`sleep(30)`ï¼‰
2. æ›´æ¢User-Agent
3. ä½¿ç”¨ä»£ç†IPï¼ˆé«˜çº§æ–¹æ¡ˆï¼‰

---

### 3. APIç›¸å…³

#### Q: `AuthenticationError: Invalid API key`

**åŸå› **: APIå¯†é’¥é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥`v1_version/constants.py`ä¸­çš„å¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤å¯†é’¥æ ¼å¼ï¼ˆå»é™¤å¤šä½™ç©ºæ ¼ï¼‰
3. æ£€æŸ¥å¯†é’¥æ˜¯å¦è¿‡æœŸæˆ–ä½™é¢ä¸è¶³

#### Q: E2Bæ²™ç®±æ‰§è¡Œè¶…æ—¶

**åŸå› **: ä»£ç æ‰§è¡Œæ—¶é—´è¿‡é•¿

**è§£å†³æ–¹æ¡ˆ**:
```python
# å¢åŠ è¶…æ—¶æ—¶é—´
sandbox.run_code(code, timeout=120)  # 120ç§’

# æˆ–ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘è®¡ç®—é‡
```

#### Q: ç™¾åº¦æœç´¢è¿”å›ç©ºç»“æœ

**åŸå› **:
1. é—®é¢˜å…³é”®è¯ä¸å½“
2. APIä½™é¢ä¸è¶³
3. æœç´¢é™åˆ¶

**è§£å†³æ–¹æ¡ˆ**:
1. æ”¹å†™é—®é¢˜ï¼Œä½¿ç”¨æ›´å…·ä½“çš„å…³é”®è¯
2. æ£€æŸ¥ç™¾åº¦åƒå¸†æ§åˆ¶å°ä½™é¢
3. æŸ¥çœ‹APIè°ƒç”¨æ—¥å¿—

---

### 4. æ€§èƒ½é—®é¢˜

#### Q: ç¨‹åºè¿è¡Œå¾ˆæ…¢

**ä¼˜åŒ–æ–¹æ¡ˆ**:

1. **å¯ç”¨å¼‚æ­¥å¹¶å‘**ï¼ˆé€‚ç”¨äºV1ï¼‰
   ```python
   # ä»
   result1 = func1()
   result2 = func2()

   # æ”¹ä¸º
   import asyncio
   results = await asyncio.gather(func1_async(), func2_async())
   ```

2. **ä½¿ç”¨ç¼“å­˜**
   ```python
   from functools import lru_cache

   @lru_cache(maxsize=100)
   def get_company_info(symbol):
       # ç›¸åŒsymbolä¼šä»ç¼“å­˜è¿”å›
       ...
   ```

3. **å‡å°‘APIè°ƒç”¨**
   - æ‰¹é‡å¤„ç†é—®é¢˜
   - ä½¿ç”¨æœ¬åœ°æ•°æ®åº“å­˜å‚¨å†å²æ•°æ®

---

### 5. æ•°æ®è´¨é‡é—®é¢˜

#### Q: çˆ¬å–çš„æ•°æ®ä¸å®Œæ•´æˆ–é”™è¯¯

**æ’æŸ¥æ­¥éª¤**:

1. **æ£€æŸ¥ç½‘é¡µç»“æ„æ˜¯å¦å˜åŒ–**
   ```python
   # æ‰“å°HTMLæŸ¥çœ‹
   print(response.text[:1000])
   ```

2. **éªŒè¯CSSé€‰æ‹©å™¨**
   ```python
   # ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·éªŒè¯é€‰æ‹©å™¨
   soup.find('div', class_='ctx-content')
   ```

3. **äº¤å‰éªŒè¯å¤šä¸ªæ•°æ®æº**
   ```python
   # åŒæ—¶ä»åŒèŠ±é¡ºå’Œakshareè·å–
   data1 = get_company_profile_ths_cn(symbol)
   data2 = get_cn_company_profile_ak(symbol)
   # å¯¹æ¯”ä¸¤è€…
   ```

---

## é¡¹ç›®ç›®å½•ç»“æ„

```
AIDM_AFAC_Agent/
â”œâ”€â”€ README.md                              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt                       # ä¾èµ–åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰
â”‚
â”œâ”€â”€ get_company_intro.py                   # å…¬å¸ä¿¡æ¯é‡‡é›†
â”œâ”€â”€ get_financial_data_annual.py           # è´¢åŠ¡æ•°æ®ä¸‹è½½
â”œâ”€â”€ get_stock_info.py                      # è‚¡ç¥¨è¡Œæƒ…
â”œâ”€â”€ get_rating_info.py                     # æœºæ„è¯„çº§
â”œâ”€â”€ get_capital_structure.py               # è‚¡æœ¬ç»“æ„
â”œâ”€â”€ get_cn_control.py                      # ä¸»åŠ›æ§ç›˜
â”œâ”€â”€ get_company_field_compare.py           # åŒè¡Œä¸šå¯¹æ¯”
â”œâ”€â”€ get_company_finance_summary.py         # è´¢åŠ¡æ‘˜è¦
â”œâ”€â”€ get_worth_predict.py                   # ä¼°å€¼é¢„æµ‹
â”‚
â”œâ”€â”€ part1_company_full_pipeline_release.ipynb   # å…¬å¸åˆ†æPipeline
â”œâ”€â”€ part2_industry_full_pipeline_release.ipynb  # è¡Œä¸šåˆ†æPipeline
â”œâ”€â”€ part3_macro_full_pipeline_release.ipynb     # å®è§‚åˆ†æPipeline
â”‚
â”œâ”€â”€ v1_version/                            # V1å¢å¼ºç‰ˆæœ¬
â”‚   â”œâ”€â”€ constants.py                       # é…ç½®å’Œæ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ financial_data_search.py           # æœç´¢å¼•æ“é›†æˆ
â”‚   â”œâ”€â”€ get_dfcf_research_info.py          # ä¸œæ–¹è´¢å¯Œç ”æŠ¥
â”‚   â”œâ”€â”€ python_data_analyse.py             # æ•°æ®åˆ†æå’Œå¯è§†åŒ–
â”‚   â”œâ”€â”€ å…¬å¸ä¸ªè‚¡ç ”æŠ¥ç”Ÿæˆ.ipynb               # V1å®Œæ•´ç¤ºä¾‹
â”‚   â””â”€â”€ ç”Ÿæˆçš„å…¬å¸ä¸ªè‚¡ç ”æŠ¥demo.pdf           # è¾“å‡ºç¤ºä¾‹
â”‚
â”œâ”€â”€ pic/                                   # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ overview.jpg
â”‚   â””â”€â”€ ali_competition_overview.png
â”‚
â”œâ”€â”€ example_v0_*.py                        # V0ç¤ºä¾‹è„šæœ¬ï¼ˆä½ åˆ›å»ºçš„ï¼‰
â”œâ”€â”€ example_v1_*.py                        # V1ç¤ºä¾‹è„šæœ¬ï¼ˆä½ åˆ›å»ºçš„ï¼‰
â””â”€â”€ test_config.py                         # é…ç½®æµ‹è¯•è„šæœ¬ï¼ˆä½ åˆ›å»ºçš„ï¼‰
```

---

## ä¸‹ä¸€æ­¥å­¦ä¹ 

### åˆå­¦è€…è·¯å¾„

1. âœ… **ç¬¬1å‘¨**: è¿è¡ŒVersion_0æ‰€æœ‰ç¤ºä¾‹ï¼Œç†Ÿæ‚‰æ•°æ®é‡‡é›†
2. âœ… **ç¬¬2å‘¨**: é…ç½®APIå¯†é’¥ï¼Œè¿è¡ŒVersion_1æœç´¢ç¤ºä¾‹
3. âœ… **ç¬¬3å‘¨**: å­¦ä¹ æ•°æ®åˆ†æå’Œå›¾è¡¨ç”Ÿæˆ
4. âœ… **ç¬¬4å‘¨**: è¿è¡Œå®Œæ•´Pipelineï¼Œç”Ÿæˆç ”æŠ¥

### è¿›é˜¶è·¯å¾„

1. **ä¿®æ”¹æç¤ºè¯**ï¼ˆPrompt Engineeringï¼‰
   - æ‰“å¼€`v1_version/financial_data_search.py`
   - æ‰¾åˆ°å„ç§`_template`å˜é‡
   - æ ¹æ®éœ€æ±‚è°ƒæ•´æç¤ºè¯

2. **æ‰©å±•æ•°æ®æº**
   - å‚è€ƒç°æœ‰çˆ¬è™«ä»£ç 
   - æ·»åŠ æ–°çš„æ•°æ®é‡‡é›†å‡½æ•°
   - å®ç°ç»Ÿä¸€æ¥å£

3. **ä¼˜åŒ–æ€§èƒ½**
   - æ·»åŠ ç¼“å­˜æœºåˆ¶
   - ä½¿ç”¨å¼‚æ­¥å¹¶å‘
   - å¼•å…¥æ•°æ®åº“å­˜å‚¨

4. **è‡ªå®šä¹‰åˆ†æ**
   - ä¿®æ”¹Notebookä¸­çš„åˆ†æé€»è¾‘
   - æ·»åŠ æ–°çš„å¯è§†åŒ–å›¾è¡¨
   - å®šåˆ¶PDFæŠ¥å‘Šæ¨¡æ¿

---

## æŠ€æœ¯æ”¯æŒ

### æ–‡æ¡£èµ„æº

- **çŸ¥ä¹æ–‡ç« **:
  - æ•°æ®é‡‡é›†: https://zhuanlan.zhihu.com/p/1932786778286297319
  - Agentè®¾è®¡: https://zhuanlan.zhihu.com/p/1932787728283592116

- **å®˜æ–¹æ–‡æ¡£**:
  - akshare: https://akshare.akfamily.xyz/
  - LangChain: https://python.langchain.com/
  - E2B: https://e2b.dev/docs
  - é€šä¹‰åƒé—®: https://help.aliyun.com/document_detail/2712195.html

### å¸¸è§èµ„æº

- **ç«èµ›é¡µé¢**: https://tianchi.aliyun.com/competition/entrance/532354
- **GitHub Issues**: å¦‚æœ‰é—®é¢˜å¯æäº¤Issue
- **æŠ€æœ¯äº¤æµ**: åŠ å…¥ç›¸å…³æŠ€æœ¯ç¤¾åŒº

---

## é™„å½•ï¼šå¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç¯å¢ƒå‡†å¤‡
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS/Linux

# å®‰è£…ä¾èµ–
pip install numpy pandas matplotlib requests beautifulsoup4 akshare lxml openpyxl
pip install langchain langchain-openai e2b-code-interpreter playwright

# å®‰è£…æµè§ˆå™¨
playwright install chromium

# æµ‹è¯•é…ç½®
python test_config.py

# è¿è¡Œç¤ºä¾‹ï¼ˆVersion_0ï¼‰
python example_v0_company_info.py
python example_v0_financial.py
python example_v0_stock.py
python example_v0_complete.py

# è¿è¡Œç¤ºä¾‹ï¼ˆVersion_1ï¼‰
python example_v1_search.py
python example_v1_multi_step.py
python example_v1_analysis.py
python example_v1_chart.py

# å¯åŠ¨Jupyter
jupyter notebook

# è½¬æ¢Notebookä¸ºè„šæœ¬
jupyter nbconvert --to script xxx.ipynb
```

---

## ç»“è¯­

æœ¬æŒ‡å—æ¶µç›–äº†ä»é›¶å¼€å§‹è¿è¡Œè¯¥é¡¹ç›®çš„å®Œæ•´æ­¥éª¤ã€‚å»ºè®®æŒ‰ç…§é¡ºåºé€æ­¥å­¦ä¹ ï¼š

1. å…ˆè¿è¡ŒVersion_0çš„ç®€å•ç¤ºä¾‹ï¼Œç†Ÿæ‚‰åŸºç¡€åŠŸèƒ½
2. é…ç½®APIå¯†é’¥åï¼Œä½“éªŒVersion_1çš„AIå¢å¼ºåŠŸèƒ½
3. æœ€åè¿è¡Œå®Œæ•´çš„Jupyter Notebook Pipeline

é‡åˆ°é—®é¢˜æ—¶ï¼Œè¯·å…ˆæŸ¥é˜…[å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)ç« èŠ‚ã€‚

ç¥ä½ ä½¿ç”¨é¡ºåˆ©ï¼ğŸš€
